!function(a){function b(a,b){var e=c("li",a,b),f=c("dt",a,b);e||f||d(a,b)}function c(b,c,d){var f=a(b,c);if(f.length>d.visible){var g=c.children().slice(a(f[d.visible]).index()).hide();e(b,d,function(){d.showCb?d.showCb(g):g.show()}).appendTo(c)}return f.length?!0:void 0}function d(a,b){var c=a.html(),d=f({input:c,visible:b.visible,separator:b.separator,atFront:b.atFront});if(c!==d){a.html(d);var g=e("span",b,function(){b.showCb?b.showCb(a,c):a.html(c)});b.atFront?g.prependTo(a):g.appendTo(a)}}function e(b,c,d){var e=c.more,f=c.moreClass,g=a("<"+b+' class="'+f+'">'+e+"</"+b+">");return g.bind("click",function(){d(),g.remove()}),g}function f(a){return a.segments=g(a.input),l(h(a))}function g(a){var b=[],c="",d="",e=!1;return a.split("").forEach(function(a){"<"===a?(e=!0,d&&(b.push({text:d,node:""}),d="")):">"===a?(e=!1,c&&(b.push({text:"",node:c}),c="")):e?c+=a:d+=a}),d&&b.push({text:d,node:""}),b}function h(a){var b=a.segments,c=a.visible,d=a.separator,e=a.atFront,f=b.map(function(a){return a.text}).join(""),g=f.split(d);return g.length>c?e?i(b,g.slice(-c).join(d)):j(b,g.slice(0,c).join(d)):b}function i(a,b){var c=!1,d=0;return a.reverse().map(function(a){if(!c){var e=a.text,f=e.length,g=b.slice(b.length-f-d,b.length-d);return e===g&&(d+=f),g.length<f&&(a.text=g,c=!0),a}}).filter(k).reverse()}function j(a,b){var c=!1,d=0;return a.map(function(a){if(!c){var e=a.text,f=e.length,g=b.slice(d,d+f);return e===g?d+=f:g.length<f&&(a.text=g,c=!0),a}}).filter(k)}function k(a){return a}function l(a){var b="";return a.forEach(function(a){a.node&&(b+="<"+a.node+">"),a.text&&(b+=a.text)}),b}var m={visible:3,more:"&hellip;",moreClass:"more",separator:" ",showCb:null,atFront:!1};a.fn.ellipsis=function(c){return this.each(function(){var d=a(this),e=a.extend({},m,c);b(d,e)})},a.fn.ellipsis.options=m}(jQuery);